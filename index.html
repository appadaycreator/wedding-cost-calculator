<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°è²»ç”¨è¨ˆç®—æ©Ÿ</title>
    <meta name="description" content="çµå©šå¼ã®è²»ç”¨ã‚’ç°¡å˜ã«è¨ˆç®—ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">
    <link rel="manifest" href="manifest.json">
    <link rel="icon" href="favicon.ico">
    <link rel="apple-touch-icon" href="icon-192.png">
    <meta name="theme-color" content="#ffffff">
    <meta property="og:title" content="ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°è²»ç”¨è¨ˆç®—æ©Ÿ">
    <meta property="og:description" content="çµå©šå¼ã®è²»ç”¨ã‚’ç°¡å˜ã«è¨ˆç®—ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">
    <meta property="og:image" content="https://appadaycreator.github.io/wedding-cost-calculator/images/ogp-image.jpg">
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://appadaycreator.github.io/wedding-cost-calculator/">
    <meta name="twitter:card" content="summary_large_image">
    <meta name="twitter:title" content="ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°è²»ç”¨è¨ˆç®—æ©Ÿ">
    <meta name="twitter:description" content="çµå©šå¼ã®è²»ç”¨ã‚’ç°¡å˜ã«è¨ˆç®—ã§ãã‚‹ãƒ„ãƒ¼ãƒ«ã§ã™ã€‚">
    <meta name="twitter:image" content="https://appadaycreator.github.io/wedding-cost-calculator/images/ogp-image.jpg">
    
    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-TXQGZRF9');</script>
    <!-- End Google Tag Manager -->
    
    <!-- External Libraries -->
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2.19/dist/tailwind.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+JP:wght@300;400;500;700&family=Klee+One:wght@400;600&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    
    <!-- PWAè¨­å®š -->
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#F8E8E8">
    <link rel="apple-touch-icon" href="icon-192.png">
    
    <!-- Favicon -->
    <link rel="icon" type="image/x-icon" href="data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMzIiIGhlaWdodD0iMzIiIHZpZXdCb3g9IjAgMCAzMiAzMiIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPHBhdGggZD0iTTE2IDJMMjAgMTBIMjhMMjIgMTZMMjQgMjRMMTYgMjBMOCAyNEwxMCAxNkw0IDEwSDEyTDE2IDJaIiBmaWxsPSIjRjhFOEU4Ii8+Cjwvc3ZnPgo=">
    
    <style>
        :root {
            --sakura-pink: #F8E8E8;
            --cream: #FFF8DC;
            --pearl-white: #FFFFFF;
            --soft-pink: #FFE4E6;
            --rose-gold: #E8B4B8;
            --gentle-gray: #F7FAFC;
            --text-dark: #2D3748;
            --text-soft: #718096;
        }
        
        body {
            font-family: 'Klee One', 'Noto Sans JP', sans-serif;
            background: linear-gradient(135deg, var(--cream) 0%, var(--sakura-pink) 50%, var(--soft-pink) 100%);
            min-height: 100vh;
        }
        
        .klee-font {
            font-family: 'Klee One', cursive;
        }
        
        .glass-card {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.2);
            box-shadow: 0 8px 32px rgba(248, 232, 232, 0.3);
        }
        
        .floating-hearts {
            position: absolute;
            width: 100%;
            height: 100%;
            overflow: hidden;
            pointer-events: none;
        }
        
        .heart {
            position: absolute;
            color: var(--rose-gold);
            opacity: 0.3;
            animation: float 6s ease-in-out infinite;
        }
        
        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }
        
        .btn-primary {
            background: linear-gradient(45deg, var(--rose-gold), #F8E8E8);
            color: var(--text-dark);
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            font-weight: 500;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(248, 232, 232, 0.4);
        }
        
        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(248, 232, 232, 0.6);
        }
        
        .form-input {
            border: 2px solid var(--sakura-pink);
            border-radius: 15px;
            padding: 12px 16px;
            background: var(--pearl-white);
            transition: all 0.3s ease;
        }
        
        .form-input:focus {
            border-color: var(--rose-gold);
            box-shadow: 0 0 0 3px rgba(248, 232, 232, 0.3);
            outline: none;
        }
        
        .cost-item {
            background: var(--pearl-white);
            border-left: 4px solid var(--rose-gold);
            padding: 16px;
            margin: 8px 0;
            border-radius: 8px;
            transition: all 0.3s ease;
        }
        
        .cost-item:hover {
            transform: translateX(5px);
            box-shadow: 0 4px 12px rgba(248, 232, 232, 0.3);
        }
        
        .step-indicator {
            display: flex;
            justify-content: center;
            margin: 30px 0;
        }
        
        .step {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background: var(--sakura-pink);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 10px;
            color: var(--text-dark);
            font-weight: 600;
            transition: all 0.3s ease;
        }
        
        .step.active {
            background: var(--rose-gold);
            color: white;
            transform: scale(1.1);
        }
        
        .step.completed {
            background: #48BB78;
            color: white;
        }
        
        .venue-card {
            background: var(--pearl-white);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }
        
        .venue-card:hover {
            border-color: var(--rose-gold);
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(248, 232, 232, 0.4);
        }
        
        .venue-card.selected {
            border-color: var(--rose-gold);
            background: var(--soft-pink);
        }
        
        .result-section {
            background: linear-gradient(135deg, var(--pearl-white) 0%, var(--soft-pink) 100%);
            border-radius: 20px;
            padding: 30px;
            margin: 20px 0;
            box-shadow: 0 10px 30px rgba(248, 232, 232, 0.3);
        }
        
        .savings-tip {
            background: var(--gentle-gray);
            border-left: 4px solid #48BB78;
            padding: 15px;
            margin: 10px 0;
            border-radius: 8px;
        }
        
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        
        .modal-content {
            background: var(--pearl-white);
            margin: 50px auto;
            padding: 30px;
            border-radius: 20px;
            max-width: 500px;
            position: relative;
            max-height: 80vh;
            overflow-y: auto;
        }
        
        .social-share {
            display: flex;
            gap: 10px;
            justify-content: center;
            margin: 20px 0;
        }
        
        .social-btn {
            padding: 10px 15px;
            border-radius: 25px;
            text-decoration: none;
            color: white;
            font-weight: 500;
            transition: all 0.3s ease;
        }
        
        .twitter { background: #1DA1F2; }
        .facebook { background: #4267B2; }
        .line { background: #00B900; }
        
        .progress-bar {
            width: 100%;
            height: 8px;
            background: var(--sakura-pink);
            border-radius: 4px;
            overflow: hidden;
            margin: 20px 0;
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, var(--rose-gold), #48BB78);
            width: 0%;
            transition: width 0.3s ease;
        }
        
        @media (max-width: 768px) {
            .modal-content {
                margin: 20px;
                padding: 20px;
            }
            
            .venue-card {
                padding: 15px;
                margin: 10px 0;
            }
            
            .glass-card {
                margin: 10px;
                padding: 20px;
            }
        }
        
        .animate-fade-in {
            animation: fadeIn 0.6s ease-in;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .tooltip {
            position: relative;
            cursor: help;
        }
        
        .tooltip:hover::after {
            content: attr(data-tooltip);
            position: absolute;
            bottom: 100%;
            left: 50%;
            transform: translateX(-50%);
            background: var(--text-dark);
            color: white;
            padding: 8px 12px;
            border-radius: 8px;
            font-size: 12px;
            white-space: nowrap;
            z-index: 1000;
        }
    </style>
</head>
<body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TXQGZRF9"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    
    <div class="floating-hearts">
        <i class="fas fa-heart heart" style="left: 10%; animation-delay: 0s; font-size: 20px;"></i>
        <i class="fas fa-heart heart" style="left: 20%; animation-delay: 1s; font-size: 16px;"></i>
        <i class="fas fa-heart heart" style="left: 30%; animation-delay: 2s; font-size: 24px;"></i>
        <i class="fas fa-heart heart" style="left: 40%; animation-delay: 3s; font-size: 18px;"></i>
        <i class="fas fa-heart heart" style="left: 50%; animation-delay: 4s; font-size: 22px;"></i>
        <i class="fas fa-heart heart" style="left: 60%; animation-delay: 5s; font-size: 16px;"></i>
        <i class="fas fa-heart heart" style="left: 70%; animation-delay: 1.5s; font-size: 20px;"></i>
        <i class="fas fa-heart heart" style="left: 80%; animation-delay: 2.5s; font-size: 18px;"></i>
        <i class="fas fa-heart heart" style="left: 90%; animation-delay: 3.5s; font-size: 24px;"></i>
    </div>

    <!-- ãƒ˜ãƒƒãƒ€ãƒ¼ -->
    <header class="glass-card mx-4 mt-4 rounded-xl p-6">
        <div class="flex items-center justify-between">
            <div class="flex items-center">
                <i class="fas fa-rings-wedding text-3xl mr-3" style="color: var(--rose-gold);"></i>
                <h1 class="klee-font text-2xl font-bold" style="color: var(--text-dark);">
                    çµå©šå¼è²»ç”¨è¨ˆç®—æ©Ÿ
                </h1>
            </div>
            <nav class="hidden md:flex space-x-6">
                <a href="#calculator" class="text-gray-600 hover:text-pink-400 transition-colors">è¨ˆç®—æ©Ÿ</a>
                <a href="#tips" class="text-gray-600 hover:text-pink-400 transition-colors">ç¯€ç´„ã®ã‚³ãƒ„</a>
                <a href="#contact" class="text-gray-600 hover:text-pink-400 transition-colors">ãŠå•ã„åˆã‚ã›</a>
            </nav>
        </div>
    </header>

    <!-- ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ -->
    <main class="container mx-auto px-4 py-8">
        <!-- ãƒ’ãƒ¼ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section class="text-center mb-12 animate-fade-in">
            <div class="glass-card rounded-2xl p-8 mb-8">
                <h2 class="klee-font text-4xl font-bold mb-4" style="color: var(--text-dark);">
                    <i class="fas fa-sparkles mr-2" style="color: var(--rose-gold);"></i>
                    ã‚ãªãŸã®ç†æƒ³ã®çµå©šå¼ã‚’å¶ãˆã‚‹ãŸã‚ã«
                    <i class="fas fa-sparkles ml-2" style="color: var(--rose-gold);"></i>
                </h2>
                <p class="text-lg mb-6" style="color: var(--text-soft);">
                    çµå©šå¼ã®è²»ç”¨ã£ã¦ã€æœ€åˆã¯ãªã‹ãªã‹åˆ†ã‹ã‚‰ãªã„ã‚‚ã®ã§ã™ã‚ˆã­ã€‚<br>
                    ã§ã‚‚å¤§ä¸ˆå¤«ï¼ä¸€ç·’ã«ç†æƒ³ã®çµå©šå¼ã®è²»ç”¨ã‚’è¨ˆç®—ã—ã¦ã¿ã¾ã—ã‚‡ã†ğŸ’•
                </p>
                <div class="flex justify-center items-center space-x-8 mb-6">
                    <div class="text-center">
                        <i class="fas fa-heart text-2xl mb-2" style="color: var(--rose-gold);"></i>
                        <p class="text-sm">ç°¡å˜å…¥åŠ›</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-calculator text-2xl mb-2" style="color: var(--rose-gold);"></i>
                        <p class="text-sm">è©³ç´°è¦‹ç©ã‚‚ã‚Š</p>
                    </div>
                    <div class="text-center">
                        <i class="fas fa-lightbulb text-2xl mb-2" style="color: var(--rose-gold);"></i>
                        <p class="text-sm">ç¯€ç´„ã®ã‚³ãƒ„</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¨ˆç®—æ©Ÿã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="calculator" class="mb-12">
            <div class="glass-card rounded-2xl p-8">
                <!-- ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼ -->
                <div class="progress-bar">
                    <div class="progress-fill" id="progressBar"></div>
                </div>
                
                <!-- ã‚¹ãƒ†ãƒƒãƒ—ã‚¤ãƒ³ã‚¸ã‚±ãƒ¼ã‚¿ãƒ¼ -->
                <div class="step-indicator">
                    <div class="step active" id="step1">1</div>
                    <div class="step" id="step2">2</div>
                    <div class="step" id="step3">3</div>
                    <div class="step" id="step4">4</div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—1: åŸºæœ¬æƒ…å ± -->
                <div id="section1" class="step-section animate-fade-in">
                    <h3 class="klee-font text-2xl font-bold mb-6 text-center" style="color: var(--text-dark);">
                        <i class="fas fa-users mr-2" style="color: var(--rose-gold);"></i>
                        ã¾ãšã¯åŸºæœ¬æƒ…å ±ã‚’æ•™ãˆã¦ãã ã•ã„ã­
                    </h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--text-dark);">
                                ã‚²ã‚¹ãƒˆæ•° <span class="tooltip" data-tooltip="æŒ™å¼ãƒ»æŠ«éœ²å®´ã«å‚åŠ ã•ã‚Œã‚‹æ–¹ã®ç·æ•°ã§ã™">ğŸ’¡</span>
                            </label>
                            <input type="number" id="guestCount" class="form-input w-full" placeholder="ä¾‹: 70" min="1" max="500">
                            <p class="text-xs mt-1" style="color: var(--text-soft);">ä¸€èˆ¬çš„ã«ã¯50-80åç¨‹åº¦ã§ã™</p>
                        </div>
                        
                        <div>
                            <label class="block text-sm font-medium mb-2" style="color: var(--text-dark);">
                                åœ°åŸŸ <span class="tooltip" data-tooltip="ä¼šå ´ã®ã‚ã‚‹éƒ½é“åºœçœŒã‚’é¸æŠã—ã¦ãã ã•ã„">ğŸ’¡</span>
                            </label>
                            <select id="region" class="form-input w-full">
                                <option value="">åœ°åŸŸã‚’é¸æŠã—ã¦ãã ã•ã„</option>
                                <option value="tokyo">æ±äº¬éƒ½</option>
                                <option value="osaka">å¤§é˜ªåºœ</option>
                                <option value="kyoto">äº¬éƒ½åºœ</option>
                                <option value="yokohama">ç¥å¥ˆå·çœŒ</option>
                                <option value="nagoya">æ„›çŸ¥çœŒ</option>
                                <option value="fukuoka">ç¦å²¡çœŒ</option>
                                <option value="other">ãã®ä»–ã®åœ°åŸŸ</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="text-center mt-8">
                        <button onclick="nextStep()" class="btn-primary">
                            æ¬¡ã¸ <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—2: ä¼šå ´é¸æŠ -->
                <div id="section2" class="step-section hidden">
                    <h3 class="klee-font text-2xl font-bold mb-6 text-center" style="color: var(--text-dark);">
                        <i class="fas fa-church mr-2" style="color: var(--rose-gold);"></i>
                        ã©ã‚“ãªä¼šå ´ãŒãŠå¥½ã¿ã§ã™ã‹ï¼Ÿ
                    </h3>
                    
                    <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-4">
                        <div class="venue-card" onclick="selectVenue('hotel')">
                            <i class="fas fa-building text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">ãƒ›ãƒ†ãƒ«</h4>
                            <p class="text-sm" style="color: var(--text-soft);">æ ¼å¼é«˜ã„ä¼çµ±çš„ãªã‚¹ã‚¿ã‚¤ãƒ«</p>
                            <p class="text-xs mt-2">ç›¸å ´: 15,000-25,000å††/å</p>
                        </div>
                        
                        <div class="venue-card" onclick="selectVenue('restaurant')">
                            <i class="fas fa-utensils text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³</h4>
                            <p class="text-sm" style="color: var(--text-soft);">ç¾å‘³ã—ã„æ–™ç†ã¨ã‚¢ãƒƒãƒˆãƒ›ãƒ¼ãƒ </p>
                            <p class="text-xs mt-2">ç›¸å ´: 12,000-20,000å††/å</p>
                        </div>
                        
                        <div class="venue-card" onclick="selectVenue('chapel')">
                            <i class="fas fa-church text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">ãƒãƒ£ãƒšãƒ«</h4>
                            <p class="text-sm" style="color: var(--text-soft);">ç¥è–ã§å³ã‹ãªé›°å›²æ°—</p>
                            <p class="text-xs mt-2">ç›¸å ´: 18,000-30,000å††/å</p>
                        </div>
                        
                        <div class="venue-card" onclick="selectVenue('garden')">
                            <i class="fas fa-leaf text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">ã‚¬ãƒ¼ãƒ‡ãƒ³</h4>
                            <p class="text-sm" style="color: var(--text-soft);">è‡ªç„¶è±Šã‹ã§é–‹æ”¾çš„</p>
                            <p class="text-xs mt-2">ç›¸å ´: 14,000-22,000å††/å</p>
                        </div>
                        
                        <div class="venue-card" onclick="selectVenue('hall')">
                            <i class="fas fa-home text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">å°‚é–€å¼å ´</h4>
                            <p class="text-sm" style="color: var(--text-soft);">çµå©šå¼ã®ãŸã‚ã®ç‰¹åˆ¥ãªç©ºé–“</p>
                            <p class="text-xs mt-2">ç›¸å ´: 16,000-26,000å††/å</p>
                        </div>
                        
                        <div class="venue-card" onclick="selectVenue('overseas')">
                            <i class="fas fa-plane text-3xl mb-3" style="color: var(--rose-gold);"></i>
                            <h4 class="font-bold mb-2">æµ·å¤–</h4>
                            <p class="text-sm" style="color: var(--text-soft);">ç‰¹åˆ¥ãªæ€ã„å‡ºã«</p>
                            <p class="text-xs mt-2">ç›¸å ´: 20,000-40,000å††/å</p>
                        </div>
                    </div>
                    
                    <div class="text-center mt-8 space-x-4">
                        <button onclick="prevStep()" class="btn-primary bg-gray-300">
                            <i class="fas fa-arrow-left mr-2"></i> å‰ã¸
                        </button>
                        <button onclick="nextStep()" class="btn-primary" id="venueNextBtn" disabled>
                            æ¬¡ã¸ <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—3: æ¼”å‡ºãƒ»ã‚ªãƒ—ã‚·ãƒ§ãƒ³ -->
                <div id="section3" class="step-section hidden">
                    <h3 class="klee-font text-2xl font-bold mb-6 text-center" style="color: var(--text-dark);">
                        <i class="fas fa-magic mr-2" style="color: var(--rose-gold);"></i>
                        ã©ã‚“ãªæ¼”å‡ºã‚’ãŠè€ƒãˆã§ã™ã‹ï¼Ÿ
                    </h3>
                    
                    <div class="grid md:grid-cols-2 gap-6">
                        <div class="glass-card p-4 rounded-lg">
                            <h4 class="font-bold mb-4">è¡£è£…</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="200000" data-category="dress">
                                    <span>ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°ãƒ‰ãƒ¬ã‚¹ï¼ˆãƒ¬ãƒ³ã‚¿ãƒ«ï¼‰</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">20ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="150000" data-category="dress">
                                    <span>ã‚«ãƒ©ãƒ¼ãƒ‰ãƒ¬ã‚¹</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">15ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="100000" data-category="dress">
                                    <span>ã‚¿ã‚­ã‚·ãƒ¼ãƒ‰</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">10ä¸‡å††</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="glass-card p-4 rounded-lg">
                            <h4 class="font-bold mb-4">å†™çœŸãƒ»æ˜ åƒ</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="150000" data-category="photo">
                                    <span>å‰æ’®ã‚Š</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">15ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="200000" data-category="photo">
                                    <span>å½“æ—¥æ’®å½±ï¼ˆãƒ—ãƒ­ã‚«ãƒ¡ãƒ©ãƒãƒ³ï¼‰</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">20ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="180000" data-category="photo">
                                    <span>ã‚¨ãƒ³ãƒ‰ãƒ­ãƒ¼ãƒ«å‹•ç”»</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">18ä¸‡å††</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="glass-card p-4 rounded-lg">
                            <h4 class="font-bold mb-4">è£…èŠ±ãƒ»è£…é£¾</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="150000" data-category="flower">
                                    <span>ãƒ–ãƒ¼ã‚±ãƒ»ãƒ–ãƒ¼ãƒˆãƒ‹ã‚¢</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">15ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="200000" data-category="flower">
                                    <span>ä¼šå ´è£…èŠ±</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">20ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="100000" data-category="flower">
                                    <span>ãƒ†ãƒ¼ãƒ–ãƒ«ã‚³ãƒ¼ãƒ‡ã‚£ãƒãƒ¼ãƒˆ</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">10ä¸‡å††</span>
                                </label>
                            </div>
                        </div>
                        
                        <div class="glass-card p-4 rounded-lg">
                            <h4 class="font-bold mb-4">æ¼”å‡º</h4>
                            <div class="space-y-3">
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="50000" data-category="performance">
                                    <span>ã‚­ãƒ£ãƒ³ãƒ‰ãƒ«ã‚µãƒ¼ãƒ“ã‚¹</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">5ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="80000" data-category="performance">
                                    <span>ãƒãƒ«ãƒ¼ãƒ³ãƒªãƒªãƒ¼ã‚¹</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">8ä¸‡å††</span>
                                </label>
                                <label class="flex items-center">
                                    <input type="checkbox" class="option-check mr-3" data-cost="120000" data-category="performance">
                                    <span>ç”Ÿæ¼”å¥</span>
                                    <span class="ml-auto text-sm" style="color: var(--text-soft);">12ä¸‡å††</span>
                                </label>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-8 space-x-4">
                        <button onclick="prevStep()" class="btn-primary bg-gray-300">
                            <i class="fas fa-arrow-left mr-2"></i> å‰ã¸
                        </button>
                        <button onclick="nextStep()" class="btn-primary">
                            æ¬¡ã¸ <i class="fas fa-arrow-right ml-2"></i>
                        </button>
                    </div>
                </div>

                <!-- ã‚¹ãƒ†ãƒƒãƒ—4: äºˆç®—è¨­å®š -->
                <div id="section4" class="step-section hidden">
                    <h3 class="klee-font text-2xl font-bold mb-6 text-center" style="color: var(--text-dark);">
                        <i class="fas fa-yen-sign mr-2" style="color: var(--rose-gold);"></i>
                        ã”äºˆç®—ã¯ã©ã‚Œãã‚‰ã„ã‚’ãŠè€ƒãˆã§ã™ã‹ï¼Ÿ
                    </h3>
                    
                    <div class="mb-6">
                        <label class="block text-sm font-medium mb-2" style="color: var(--text-dark);">
                            ã”äºˆç®—ï¼ˆç·é¡ï¼‰
                        </label>
                        <input type="range" id="budgetRange" min="1000000" max="5000000" step="100000" value="3000000" 
                               class="w-full h-2 bg-pink-200 rounded-lg appearance-none cursor-pointer">
                        <div class="flex justify-between text-sm mt-2" style="color: var(--text-soft);">
                            <span>100ä¸‡å††</span>
                            <span id="budgetDisplay" class="font-bold">300ä¸‡å††</span>
                            <span>500ä¸‡å††</span>
                        </div>
                    </div>
                    
                    <div class="glass-card p-6 rounded-lg mb-6">
                        <h4 class="font-bold mb-4 text-center">ä¸€èˆ¬çš„ãªäºˆç®—ã®ç›®å®‰</h4>
                        <div class="grid grid-cols-3 gap-4 text-center">
                            <div class="p-3 rounded-lg" style="background: var(--soft-pink);">
                                <p class="font-bold">200-250ä¸‡å††</p>
                                <p class="text-xs">ã‚·ãƒ³ãƒ—ãƒ«å©š</p>
                            </div>
                            <div class="p-3 rounded-lg" style="background: var(--sakura-pink);">
                                <p class="font-bold">300-350ä¸‡å††</p>
                                <p class="text-xs">ä¸€èˆ¬çš„</p>
                            </div>
                            <div class="p-3 rounded-lg" style="background: var(--rose-gold); color: white;">
                                <p class="font-bold">400ä¸‡å††ä»¥ä¸Š</p>
                                <p class="text-xs">è±ªè¯</p>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center space-x-4">
                        <button onclick="prevStep()" class="btn-primary bg-gray-300">
                            <i class="fas fa-arrow-left mr-2"></i> å‰ã¸
                        </button>
                        <button onclick="calculateCost()" class="btn-primary">
                            <i class="fas fa-calculator mr-2"></i> è¨ˆç®—ã™ã‚‹
                        </button>
                    </div>
                </div>
            </div>
        </section>

        <!-- çµæœè¡¨ç¤ºã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="results" class="mb-12 hidden">
            <div class="result-section">
                <h3 class="klee-font text-3xl font-bold mb-6 text-center" style="color: var(--text-dark);">
                    <i class="fas fa-heart mr-2" style="color: var(--rose-gold);"></i>
                    ã‚ãªãŸã®çµå©šå¼è²»ç”¨è¦‹ç©ã‚‚ã‚Š
                    <i class="fas fa-heart ml-2" style="color: var(--rose-gold);"></i>
                </h3>
                
                <div class="text-center mb-8">
                    <div class="text-5xl font-bold mb-2 klee-font" style="color: var(--rose-gold);" id="totalCost">
                        0å††
                    </div>
                    <p class="text-lg" style="color: var(--text-soft);">
                        â€»ã“ã®é‡‘é¡ã¯ã‚ãã¾ã§å‚è€ƒå€¤ã§ã™ã€‚å®Ÿéš›ã®è²»ç”¨ã¯ä¼šå ´ã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚
                    </p>
                </div>
                
                <!-- äºˆç®—ã¨ã®æ¯”è¼ƒ -->
                <div class="glass-card p-6 rounded-lg mb-6">
                    <h4 class="font-bold mb-4 text-center">ã”äºˆç®—ã¨ã®æ¯”è¼ƒ</h4>
                    <div id="budgetComparison" class="text-center">
                        <!-- å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- è²»ç”¨å†…è¨³ -->
                <div class="glass-card p-6 rounded-lg mb-6">
                    <h4 class="font-bold mb-4">
                        <i class="fas fa-list mr-2" style="color: var(--rose-gold);"></i>
                        è²»ç”¨å†…è¨³
                    </h4>
                    <div id="costBreakdown">
                        <!-- å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º -->
                <div class="glass-card p-6 rounded-lg mb-6">
                    <h4 class="font-bold mb-4 text-center">è²»ç”¨ã®å‰²åˆ</h4>
                    <canvas id="costChart" width="400" height="200"></canvas>
                </div>
                
                <!-- ç¯€ç´„ææ¡ˆ -->
                <div class="glass-card p-6 rounded-lg mb-6">
                    <h4 class="font-bold mb-4">
                        <i class="fas fa-lightbulb mr-2" style="color: #48BB78;"></i>
                        ç¯€ç´„ã®ã‚³ãƒ„
                    </h4>
                    <div id="savingsAdvice">
                        <!-- å‹•çš„ã«ç”Ÿæˆ -->
                    </div>
                </div>
                
                <!-- ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ãƒœã‚¿ãƒ³ -->
                <div class="text-center space-y-4">
                    <div class="social-share">
                        <a href="#" onclick="shareTwitter()" class="social-btn twitter">
                            <i class="fab fa-twitter mr-2"></i>Twitterã§ã‚·ã‚§ã‚¢
                        </a>
                        <a href="#" onclick="shareFacebook()" class="social-btn facebook">
                            <i class="fab fa-facebook mr-2"></i>Facebookã§ã‚·ã‚§ã‚¢
                        </a>
                        <a href="#" onclick="shareLine()" class="social-btn line">
                            <i class="fab fa-line mr-2"></i>LINEã§ã‚·ã‚§ã‚¢
                        </a>
                    </div>
                    
                    <div class="space-x-4">
                        <button onclick="saveCalculation()" class="btn-primary">
                            <i class="fas fa-save mr-2"></i>è¨ˆç®—çµæœã‚’ä¿å­˜
                        </button>
                        <button onclick="showComparison()" class="btn-primary">
                            <i class="fas fa-balance-scale mr-2"></i>ä»–ã®ãƒ—ãƒ©ãƒ³ã¨æ¯”è¼ƒ
                        </button>
                        <button onclick="resetCalculator()" class="btn-primary bg-gray-300">
                            <i class="fas fa-redo mr-2"></i>ã‚‚ã†ä¸€åº¦è¨ˆç®—
                        </button>
                    </div>
                    
                    <!-- A8 AFFILIATE -->
                    <div class="mt-8 p-6 glass-card rounded-lg">
                        <h4 class="font-bold mb-4 text-center">ãŠå¾—ãªçµå©šå¼å ´æ¢ã—</h4>
                        <p class="text-center mb-4">è¨ˆç®—çµæœã‚’å‚è€ƒã«ã€ç†æƒ³ã®ä¼šå ´ã‚’æ¢ã—ã¦ã¿ã¾ã›ã‚“ã‹ï¼Ÿ</p>
                        <div class="grid md:grid-cols-3 gap-4">
                            <a href="#" class="block p-4 bg-pink-50 rounded-lg hover:bg-pink-100 transition-colors">
                                <div class="text-center">
                                    <i class="fas fa-search text-2xl mb-2" style="color: var(--rose-gold);"></i>
                                    <p class="font-bold">ã‚¼ã‚¯ã‚·ã‚£</p>
                                    <p class="text-xs">è±Šå¯Œãªä¼šå ´æƒ…å ±</p>
                                </div>
                            </a>
                            <a href="#" class="block p-4 bg-pink-50 rounded-lg hover:bg-pink-100 transition-colors">
                                <div class="text-center">
                                    <i class="fas fa-heart text-2xl mb-2" style="color: var(--rose-gold);"></i>
                                    <p class="font-bold">ãƒãƒŠãƒ¦ãƒ¡</p>
                                    <p class="text-xs">ãŠå¾—ãªç‰¹å…¸</p>
                                </div>
                            </a>
                            <a href="#" class="block p-4 bg-pink-50 rounded-lg hover:bg-pink-100 transition-colors">
                                <div class="text-center">
                                    <i class="fas fa-users text-2xl mb-2" style="color: var(--rose-gold);"></i>
                                    <p class="font-bold">ã¿ã‚“ãªã®ã‚¦ã‚§ãƒ‡ã‚£ãƒ³ã‚°</p>
                                    <p class="text-xs">å£ã‚³ãƒŸæƒ…å ±</p>
                                </div>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ç¯€ç´„ã®ã‚³ãƒ„ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="tips" class="mb-12">
            <div class="glass-card rounded-2xl p-8">
                <h3 class="klee-font text-3xl font-bold mb-8 text-center" style="color: var(--text-dark);">
                    <i class="fas fa-piggy-bank mr-2" style="color: var(--rose-gold);"></i>
                    è³¢ã„ç¯€ç´„ã®ã‚³ãƒ„
                </h3>
                
                <div class="grid md:grid-cols-2 gap-6">
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-calendar mr-2" style="color: #48BB78;"></i>
                            æ™‚æœŸã‚’å·¥å¤«ã™ã‚‹
                        </h4>
                        <p class="text-sm">ã‚ªãƒ•ã‚·ãƒ¼ã‚ºãƒ³ï¼ˆ1-2æœˆã€7-8æœˆï¼‰ã¯ä¼šå ´è²»ç”¨ãŒå®‰ããªã‚‹ã“ã¨ãŒå¤šã„ã§ã™ã€‚</p>
                    </div>
                    
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-clock mr-2" style="color: #48BB78;"></i>
                            å¹³æ—¥ã‚„å¤•æ–¹ã‚’é¸ã¶
                        </h4>
                        <p class="text-sm">åœŸæ—¥ç¥æ—¥ã‚ˆã‚Šå¹³æ—¥ã€æ˜¼ã‚ˆã‚Šå¤•æ–¹ã®æ–¹ãŒãŠå¾—ãªæ–™é‡‘è¨­å®šã®ä¼šå ´ãŒå¤šã„ã§ã™ã€‚</p>
                    </div>
                    
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-hand-holding-heart mr-2" style="color: #48BB78;"></i>
                            æ‰‹ä½œã‚Šã‚¢ã‚¤ãƒ†ãƒ 
                        </h4>
                        <p class="text-sm">æ‹›å¾…çŠ¶ã€å¸­æœ­ã€ãƒ—ãƒã‚®ãƒ•ãƒˆãªã©ã¯æ‰‹ä½œã‚Šã™ã‚‹ã“ã¨ã§å¤§å¹…ã«ç¯€ç´„ã§ãã¾ã™ã€‚</p>
                    </div>
                    
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-utensils mr-2" style="color: #48BB78;"></i>
                            æ–™ç†ã®ã‚°ãƒ¬ãƒ¼ãƒ‰èª¿æ•´
                        </h4>
                        <p class="text-sm">ä¸€ç•ªé«˜ã„ã‚³ãƒ¼ã‚¹ã§ãªãã¦ã‚‚ã€ãŠã„ã—ã„æ–™ç†ã¯æä¾›ã§ãã¾ã™ã€‚è©¦é£Ÿã§ç¢ºèªã‚’ã€‚</p>
                    </div>
                    
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-camera mr-2" style="color: #48BB78;"></i>
                            å†™çœŸæ’®å½±ã®å·¥å¤«
                        </h4>
                        <p class="text-sm">ã‚«ãƒ¡ãƒ©ãƒãƒ³ã¯æœ€ä½é™ã«ã—ã¦ã€ã‚²ã‚¹ãƒˆã«ã‚‚å†™çœŸã‚’ãŠé¡˜ã„ã™ã‚‹æ–¹æ³•ã‚‚ã‚ã‚Šã¾ã™ã€‚</p>
                    </div>
                    
                    <div class="savings-tip">
                        <h4 class="font-bold mb-2">
                            <i class="fas fa-gift mr-2" style="color: #48BB78;"></i>
                            å¼•ãå‡ºç‰©ã‚’è¦‹ç›´ã™
                        </h4>
                        <p class="text-sm">ã‚«ã‚¿ãƒ­ã‚°ã‚®ãƒ•ãƒˆã‚„å®Ÿç”¨çš„ãªã‚‚ã®ã‚’é¸ã¶ã“ã¨ã§ã€ã‚²ã‚¹ãƒˆã«ã‚‚å–œã°ã‚Œã¦ç¯€ç´„ã«ã‚‚ã€‚</p>
                    </div>
                </div>
            </div>
        </section>

        <!-- è¨ˆç®—å±¥æ­´ã‚»ã‚¯ã‚·ãƒ§ãƒ³ -->
        <section id="history" class="mb-12 hidden">
            <div class="glass-card rounded-2xl p-8">
                <h3 class="klee-font text-2xl font-bold mb-6" style="color: var(--text-dark);">
                    <i class="fas fa-history mr-2" style="color: var(--rose-gold);"></i>
                    è¨ˆç®—å±¥æ­´
                </h3>
                <div id="historyList">
                    <!-- å‹•çš„ã«ç”Ÿæˆ -->
                </div>
            </div>
        </section>
    </main>

    <!-- ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="comparisonModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="klee-font text-xl font-bold">ãƒ—ãƒ©ãƒ³æ¯”è¼ƒ</h3>
                <button onclick="closeModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div id="comparisonContent">
                <!-- å‹•çš„ã«ç”Ÿæˆ -->
            </div>
        </div>
    </div>

    <!-- ãƒ•ãƒƒã‚¿ãƒ¼ -->
    <footer class="glass-card mx-4 mb-4 rounded-xl p-6">
        <div class="text-center">
            <div class="flex justify-center space-x-6 mb-4">
                <a href="#privacy" onclick="showPrivacyPolicy()" class="text-gray-600 hover:text-pink-400 transition-colors">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</a>
                <a href="#disclaimer" onclick="showDisclaimer()" class="text-gray-600 hover:text-pink-400 transition-colors">å…è²¬äº‹é …</a>
                <a href="#contact" onclick="showContact()" class="text-gray-600 hover:text-pink-400 transition-colors">ãŠå•ã„åˆã‚ã›</a>
            </div>
            <p class="text-sm" style="color: var(--text-soft);">
                Â© 2025 çµå©šå¼è²»ç”¨è¨ˆç®—æ©Ÿ. All rights reserved.
            </p>
            <p class="text-xs mt-2" style="color: var(--text-soft);">
                ã“ã®ãƒ„ãƒ¼ãƒ«ã§è¨ˆç®—ã•ã‚ŒãŸé‡‘é¡ã¯å‚è€ƒå€¤ã§ã™ã€‚å®Ÿéš›ã®è²»ç”¨ã¯ä¼šå ´ã‚„æ™‚æœŸã«ã‚ˆã‚Šç•°ãªã‚Šã¾ã™ã€‚
            </p>
        </div>
    </footer>

    <!-- ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="privacyModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="klee-font text-xl font-bold">ãƒ—ãƒ©ã‚¤ãƒã‚·ãƒ¼ãƒãƒªã‚·ãƒ¼</h3>
                <button onclick="closePrivacyModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4 text-sm">
                <section>
                    <h4 class="font-bold mb-2">å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«ã¤ã„ã¦</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®å€‹äººæƒ…å ±ã®ä¿è­·ã‚’é‡è¦ãªè²¬å‹™ã¨è€ƒãˆã€ä»¥ä¸‹ã®æ–¹é‡ã«åŸºã¥ã„ã¦å€‹äººæƒ…å ±ã‚’å–ã‚Šæ‰±ã„ã¾ã™ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">åé›†ã™ã‚‹æƒ…å ±</h4>
                    <ul class="list-disc list-inside space-y-1">
                        <li>ã‚²ã‚¹ãƒˆæ•°ã€åœ°åŸŸã€ä¼šå ´ã‚¿ã‚¤ãƒ—ãªã©ã®è¨ˆç®—ã«å¿…è¦ãªæƒ…å ±</li>
                        <li>ã‚µã‚¤ãƒˆã®åˆ©ç”¨çŠ¶æ³ã«é–¢ã™ã‚‹çµ±è¨ˆçš„æƒ…å ±</li>
                        <li>ãŠå•ã„åˆã‚ã›æ™‚ã®é€£çµ¡å…ˆæƒ…å ±</li>
                    </ul>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">åˆ©ç”¨ç›®çš„</h4>
                    <ul class="list-disc list-inside space-y-1">
                        <li>çµå©šå¼è²»ç”¨ã®è¨ˆç®—ã‚µãƒ¼ãƒ“ã‚¹ã®æä¾›</li>
                        <li>ã‚µãƒ¼ãƒ“ã‚¹å‘ä¸Šã®ãŸã‚ã®åˆ†æ</li>
                        <li>ãŠå•ã„åˆã‚ã›ã¸ã®å¯¾å¿œ</li>
                    </ul>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">ç¬¬ä¸‰è€…ã¸ã®æä¾›</h4>
                    <p>æ³•ä»¤ã«åŸºã¥ãå ´åˆã‚’é™¤ãã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®åŒæ„ãªãç¬¬ä¸‰è€…ã«å€‹äººæƒ…å ±ã‚’æä¾›ã™ã‚‹ã“ã¨ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">Cookieã«ã¤ã„ã¦</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã§ã¯ã€ã‚µãƒ¼ãƒ“ã‚¹å‘ä¸Šã®ãŸã‚Cookieã‚’ä½¿ç”¨ã™ã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚Cookieã®ä½¿ç”¨ã‚’æœ›ã¾ãªã„å ´åˆã¯ã€ãƒ–ãƒ©ã‚¦ã‚¶ã®è¨­å®šã§ç„¡åŠ¹ã«ã§ãã¾ã™ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">ãŠå•ã„åˆã‚ã›</h4>
                    <p>å€‹äººæƒ…å ±ã®å–ã‚Šæ‰±ã„ã«é–¢ã™ã‚‹ãŠå•ã„åˆã‚ã›ã¯ã€ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã‚ˆã‚Šã”é€£çµ¡ãã ã•ã„ã€‚</p>
                </section>
                
                <p class="text-xs mt-4">æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´6æœˆ7æ—¥</p>
            </div>
        </div>
    </div>

    <!-- å…è²¬äº‹é …ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="disclaimerModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="klee-font text-xl font-bold">å…è²¬äº‹é …</h3>
                <button onclick="closeDisclaimerModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <div class="space-y-4 text-sm">
                <section>
                    <h4 class="font-bold mb-2">è¨ˆç®—çµæœã«ã¤ã„ã¦</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã§è¡¨ç¤ºã•ã‚Œã‚‹è²»ç”¨ã¯ã€ä¸€èˆ¬çš„ãªç›¸å ´ã«åŸºã¥ãå‚è€ƒå€¤ã§ã™ã€‚å®Ÿéš›ã®è²»ç”¨ã¯ä»¥ä¸‹ã®è¦å› ã«ã‚ˆã‚Šå¤§ããç•°ãªã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ï¼š</p>
                    <ul class="list-disc list-inside space-y-1 mt-2">
                        <li>ä¼šå ´ã®ç«‹åœ°ã€ã‚°ãƒ¬ãƒ¼ãƒ‰ã€è¨­å‚™</li>
                        <li>é–‹å‚¬æ™‚æœŸã€æ›œæ—¥ã€æ™‚é–“å¸¯</li>
                        <li>é¸æŠã™ã‚‹æ–™ç†ã€æ¼”å‡ºã€ã‚ªãƒ—ã‚·ãƒ§ãƒ³</li>
                        <li>åœ°åŸŸã®ç›¸å ´å¤‰å‹•</li>
                        <li>ç‚ºæ›¿ãƒ¬ãƒ¼ãƒˆï¼ˆæµ·å¤–æŒ™å¼ã®å ´åˆï¼‰</li>
                    </ul>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">æƒ…å ±ã®æ­£ç¢ºæ€§</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã®æƒ…å ±ã¯ã€å…¬é–‹æ™‚ç‚¹ã§ã®ä¸€èˆ¬çš„ãªæƒ…å ±ã«åŸºã¥ã„ã¦ã„ã¾ã™ãŒã€ãã®æ­£ç¢ºæ€§ã€å®Œå…¨æ€§ã‚’ä¿è¨¼ã™ã‚‹ã‚‚ã®ã§ã¯ã‚ã‚Šã¾ã›ã‚“ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">åˆ©ç”¨ã«é–¢ã™ã‚‹æ³¨æ„</h4>
                    <ul class="list-disc list-inside space-y-1">
                        <li>è¨ˆç®—çµæœã¯å¿…ãšä¼šå ´ã«ç›´æ¥ç¢ºèªã—ã¦ãã ã•ã„</li>
                        <li>å¥‘ç´„å‰ã«ã¯å¿…ãšè©³ç´°ãªè¦‹ç©ã‚‚ã‚Šã‚’å–å¾—ã—ã¦ãã ã•ã„</li>
                        <li>å½“ã‚µã‚¤ãƒˆã®æƒ…å ±ã®ã¿ã«åŸºã¥ãåˆ¤æ–­ã¯ãŠæ§ãˆãã ã•ã„</li>
                    </ul>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">æå®³ã®å…è²¬</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã®åˆ©ç”¨ã«ã‚ˆã‚Šç”Ÿã˜ãŸç›´æ¥çš„ã€é–“æ¥çš„ãªæå®³ã«ã¤ã„ã¦ã€é‹å–¶è€…ã¯ä¸€åˆ‡ã®è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">å¤–éƒ¨ãƒªãƒ³ã‚¯ã«ã¤ã„ã¦</h4>
                    <p>å½“ã‚µã‚¤ãƒˆã‹ã‚‰ãƒªãƒ³ã‚¯ã•ã‚Œã¦ã„ã‚‹å¤–éƒ¨ã‚µã‚¤ãƒˆã®å†…å®¹ã«ã¤ã„ã¦ã€é‹å–¶è€…ã¯è²¬ä»»ã‚’è² ã„ã¾ã›ã‚“ã€‚</p>
                </section>
                
                <section>
                    <h4 class="font-bold mb-2">ã‚µãƒ¼ãƒ“ã‚¹ã®å¤‰æ›´ãƒ»åœæ­¢</h4>
                    <p>äºˆå‘Šãªãã‚µãƒ¼ãƒ“ã‚¹å†…å®¹ã®å¤‰æ›´ã‚„åœæ­¢ã‚’è¡Œã†å ´åˆãŒã‚ã‚Šã¾ã™ã€‚</p>
                </section>
                
                <p class="text-xs mt-4">æœ€çµ‚æ›´æ–°æ—¥: 2025å¹´6æœˆ7æ—¥</p>
            </div>
        </div>
    </div>

    <!-- ãŠå•ã„åˆã‚ã›ãƒ¢ãƒ¼ãƒ€ãƒ« -->
    <div id="contactModal" class="modal">
        <div class="modal-content">
            <div class="flex justify-between items-center mb-4">
                <h3 class="klee-font text-xl font-bold">ãŠå•ã„åˆã‚ã›</h3>
                <button onclick="closeContactModal()" class="text-gray-500 hover:text-gray-700">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            <form id="contactForm" class="space-y-4">
                <div>
                    <label class="block text-sm font-medium mb-2">ãŠåå‰ *</label>
                    <input type="text" required class="form-input w-full" placeholder="å±±ç”°èŠ±å­">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">ãƒ¡ãƒ¼ãƒ«ã‚¢ãƒ‰ãƒ¬ã‚¹ *</label>
                    <input type="email" required class="form-input w-full" placeholder="example@email.com">
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">ãŠå•ã„åˆã‚ã›ç¨®åˆ¥</label>
                    <select class="form-input w-full">
                        <option>ã‚µã‚¤ãƒˆã®ä½¿ã„æ–¹ã«ã¤ã„ã¦</option>
                        <option>è¨ˆç®—çµæœã«ã¤ã„ã¦</option>
                        <option>ä¸å…·åˆã®å ±å‘Š</option>
                        <option>ãã®ä»–</option>
                    </select>
                </div>
                
                <div>
                    <label class="block text-sm font-medium mb-2">ãŠå•ã„åˆã‚ã›å†…å®¹ *</label>
                    <textarea required class="form-input w-full" rows="5" placeholder="ãŠå•ã„åˆã‚ã›å†…å®¹ã‚’ã”è¨˜å…¥ãã ã•ã„"></textarea>
                </div>
                
                <div class="text-center">
                    <button type="submit" class="btn-primary">
                        <i class="fas fa-paper-plane mr-2"></i>é€ä¿¡ã™ã‚‹
                    </button>
                </div>
            </form>
            
            <div class="mt-6 pt-6 border-t">
                <p class="text-sm text-center" style="color: var(--text-soft);">
                    ãŠè¿”äº‹ã¾ã§ãŠæ™‚é–“ã‚’ã„ãŸã ãå ´åˆãŒã‚ã‚Šã¾ã™ã€‚<br>
                    ãŠæ€¥ãã®å ´åˆã¯ã€å„ä¼šå ´ã«ç›´æ¥ãŠå•ã„åˆã‚ã›ãã ã•ã„ã€‚
                </p>
            </div>
        </div>
    </div>

    <script>
        // ã‚°ãƒ­ãƒ¼ãƒãƒ«å¤‰æ•°
        let currentStep = 1;
        let selectedVenue = '';
        let calculationData = {};
        let savedCalculations = JSON.parse(localStorage.getItem('weddingCalculations') || '[]');

        // åœ°åŸŸåˆ¥åŸºæœ¬æ–™é‡‘ãƒ‡ãƒ¼ã‚¿
        const regionMultipliers = {
            'tokyo': 1.3,
            'osaka': 1.1,
            'kyoto': 1.2,
            'yokohama': 1.25,
            'nagoya': 1.0,
            'fukuoka': 0.9,
            'other': 0.85
        };

        // ä¼šå ´åˆ¥åŸºæœ¬æ–™é‡‘
        const venuePrices = {
            'hotel': { base: 500000, perPerson: 18000 },
            'restaurant': { base: 300000, perPerson: 15000 },
            'chapel': { base: 600000, perPerson: 22000 },
            'garden': { base: 400000, perPerson: 16000 },
            'hall': { base: 550000, perPerson: 20000 },
            'overseas': { base: 800000, perPerson: 30000 }
        };

        // åˆæœŸåŒ–
        document.addEventListener('DOMContentLoaded', function() {
            updateProgress();
            setupEventListeners();
            loadCalculationHistory();
            
            // äºˆç®—ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            const budgetRange = document.getElementById('budgetRange');
            const budgetDisplay = document.getElementById('budgetDisplay');
            
            budgetRange.addEventListener('input', function() {
                budgetDisplay.textContent = (parseInt(this.value) / 10000).toLocaleString() + 'ä¸‡å††';
            });
        });

        function setupEventListeners() {
            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            document.querySelectorAll('.option-check').forEach(checkbox => {
                checkbox.addEventListener('change', updateRealTimeCalculation);
            });

            // å…¥åŠ›ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®ã‚¤ãƒ™ãƒ³ãƒˆ
            document.getElementById('guestCount').addEventListener('input', updateRealTimeCalculation);
            document.getElementById('region').addEventListener('change', updateRealTimeCalculation);

            // ãŠå•ã„åˆã‚ã›ãƒ•ã‚©ãƒ¼ãƒ ã®é€ä¿¡
            document.getElementById('contactForm').addEventListener('submit', function(e) {
                e.preventDefault();
                alert('ãŠå•ã„åˆã‚ã›ã‚’å—ã‘ä»˜ã‘ã¾ã—ãŸã€‚ã‚ã‚ŠãŒã¨ã†ã”ã–ã„ã¾ã™ã€‚');
                closeContactModal();
            });
        }

        function nextStep() {
            if (validateCurrentStep()) {
                document.getElementById(`section${currentStep}`).classList.add('hidden');
                document.getElementById(`step${currentStep}`).classList.remove('active');
                document.getElementById(`step${currentStep}`).classList.add('completed');
                
                currentStep++;
                
                document.getElementById(`section${currentStep}`).classList.remove('hidden');
                document.getElementById(`step${currentStep}`).classList.add('active');
                
                updateProgress();
                
                // ã‚¹ãƒ†ãƒƒãƒ—3ã§æ¼”å‡ºãŒé¸æŠã•ã‚ŒãŸå ´åˆã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¨ˆç®—
                if (currentStep === 3) {
                    updateRealTimeCalculation();
                }
            }
        }

        function prevStep() {
            document.getElementById(`section${currentStep}`).classList.add('hidden');
            document.getElementById(`step${currentStep}`).classList.remove('active');
            
            currentStep--;
            
            document.getElementById(`step${currentStep}`).classList.remove('completed');
            document.getElementById(`step${currentStep}`).classList.add('active');
            document.getElementById(`section${currentStep}`).classList.remove('hidden');
            
            updateProgress();
        }

        function validateCurrentStep() {
            switch(currentStep) {
                case 1:
                    const guestCount = document.getElementById('guestCount').value;
                    const region = document.getElementById('region').value;
                    if (!guestCount || !region) {
                        alert('ã‚²ã‚¹ãƒˆæ•°ã¨åœ°åŸŸã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                        return false;
                    }
                    if (guestCount < 1 || guestCount > 500) {
                        alert('ã‚²ã‚¹ãƒˆæ•°ã¯1åä»¥ä¸Š500åä»¥ä¸‹ã§å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚');
                        return false;
                    }
                    return true;
                case 2:
                    if (!selectedVenue) {
                        alert('ä¼šå ´ã‚¿ã‚¤ãƒ—ã‚’é¸æŠã—ã¦ãã ã•ã„ã€‚');
                        return false;
                    }
                    return true;
                default:
                    return true;
            }
        }

        function updateProgress() {
            const progress = (currentStep / 4) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        function selectVenue(venueType) {
            // å‰ã®é¸æŠã‚’ã‚¯ãƒªã‚¢
            document.querySelectorAll('.venue-card').forEach(card => {
                card.classList.remove('selected');
            });
            
            // æ–°ã—ã„é¸æŠã‚’è¨­å®š
            event.target.closest('.venue-card').classList.add('selected');
            selectedVenue = venueType;
            
            // æ¬¡ã¸ãƒœã‚¿ãƒ³ã‚’æœ‰åŠ¹åŒ–
            document.getElementById('venueNextBtn').disabled = false;
            
            updateRealTimeCalculation();
        }

        function updateRealTimeCalculation() {
            if (currentStep >= 2 && selectedVenue) {
                const guestCount = parseInt(document.getElementById('guestCount').value) || 0;
                const region = document.getElementById('region').value;
                
                if (guestCount > 0 && region) {
                    const calculation = performCalculation();
                    // ç°¡æ˜“ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’è¡¨ç¤ºã™ã‚‹å ´åˆã¯ã“ã“ã«è¿½åŠ 
                }
            }
        }

        function calculateCost() {
            const calculation = performCalculation();
            displayResults(calculation);
            
            // çµæœã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’è¡¨ç¤º
            document.getElementById('results').classList.remove('hidden');
            document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            
            // Google Analytics ã‚¤ãƒ™ãƒ³ãƒˆ
            if (typeof gtag !== 'undefined') {
                gtag('event', 'calculation_completed', {
                    'event_category': 'wedding_calculator',
                    'event_label': selectedVenue,
                    'value': calculation.total
                });
            }
        }

        function performCalculation() {
            const guestCount = parseInt(document.getElementById('guestCount').value);
            const region = document.getElementById('region').value;
            const budget = parseInt(document.getElementById('budgetRange').value);
            
            // åŸºæœ¬è²»ç”¨è¨ˆç®—
            const venuePrice = venuePrices[selectedVenue];
            const regionMultiplier = regionMultipliers[region];
            
            const baseCost = venuePrice.base * regionMultiplier;
            const guestCost = venuePrice.perPerson * guestCount * regionMultiplier;
            
            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³è²»ç”¨è¨ˆç®—
            let optionsCost = 0;
            const selectedOptions = [];
            
            document.querySelectorAll('.option-check:checked').forEach(option => {
                const cost = parseInt(option.dataset.cost);
                optionsCost += cost;
                selectedOptions.push({
                    name: option.parentElement.querySelector('span').textContent,
                    cost: cost,
                    category: option.dataset.category
                });
            });
            
            const total = baseCost + guestCost + optionsCost;
            
            calculationData = {
                guestCount,
                region,
                venue: selectedVenue,
                budget,
                baseCost,
                guestCost,
                optionsCost,
                total,
                selectedOptions,
                timestamp: new Date().toISOString()
            };
            
            return calculationData;
        }

        function displayResults(calculation) {
            // ç·é¡è¡¨ç¤º
            document.getElementById('totalCost').textContent = 
                calculation.total.toLocaleString() + 'å††';
            
            // äºˆç®—ã¨ã®æ¯”è¼ƒ
            displayBudgetComparison(calculation);
            
            // è²»ç”¨å†…è¨³
            displayCostBreakdown(calculation);
            
            // ãƒãƒ£ãƒ¼ãƒˆè¡¨ç¤º
            displayCostChart(calculation);
            
            // ç¯€ç´„ã‚¢ãƒ‰ãƒã‚¤ã‚¹
            displaySavingsAdvice(calculation);
        }

        function displayBudgetComparison(calculation) {
            const diff = calculation.budget - calculation.total;
            const comparisonDiv = document.getElementById('budgetComparison');
            
            if (diff >= 0) {
                comparisonDiv.innerHTML = `
                    <div class="text-green-600">
                        <i class="fas fa-check-circle text-2xl mb-2"></i>
                        <p class="font-bold text-lg">äºˆç®—å†…ã«ãŠã•ã¾ã£ã¦ã„ã¾ã™ï¼</p>
                        <p class="text-sm">ä½™è£•é¡: ${diff.toLocaleString()}å††</p>
                        <p class="text-xs mt-2">ã“ã®ä½™è£•åˆ†ã§æ›´ãªã‚‹æ¼”å‡ºã‚„ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚‚æ¤œè¨ã§ãã¾ã™ã­ã€‚</p>
                    </div>
                `;
            } else {
                comparisonDiv.innerHTML = `
                    <div class="text-orange-600">
                        <i class="fas fa-exclamation-triangle text-2xl mb-2"></i>
                        <p class="font-bold text-lg">äºˆç®—ã‚’${Math.abs(diff).toLocaleString()}å††ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ã¾ã™</p>
                        <p class="text-xs mt-2">ä¸‹è¨˜ã®ç¯€ç´„ã‚¢ãƒ‰ãƒã‚¤ã‚¹ã‚’å‚è€ƒã«èª¿æ•´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚</p>
                    </div>
                `;
            }
        }

        function displayCostBreakdown(calculation) {
            const breakdown = document.getElementById('costBreakdown');
            
            let html = `
                <div class="cost-item">
                    <div class="flex justify-between items-center">
                        <span><i class="fas fa-building mr-2"></i>ä¼šå ´åŸºæœ¬æ–™</span>
                        <span class="font-bold">${calculation.baseCost.toLocaleString()}å††</span>
                    </div>
                </div>
                <div class="cost-item">
                    <div class="flex justify-between items-center">
                        <span><i class="fas fa-users mr-2"></i>ã‚²ã‚¹ãƒˆè²»ç”¨ (${calculation.guestCount}å)</span>
                        <span class="font-bold">${calculation.guestCost.toLocaleString()}å††</span>
                    </div>
                    <div class="text-xs mt-1" style="color: var(--text-soft);">
                        @${(calculation.guestCost / calculation.guestCount).toLocaleString()}å††/å
                    </div>
                </div>
            `;
            
            // ã‚ªãƒ—ã‚·ãƒ§ãƒ³åˆ¥ã«è¡¨ç¤º
            const optionsByCategory = {};
            calculation.selectedOptions.forEach(option => {
                if (!optionsByCategory[option.category]) {
                    optionsByCategory[option.category] = [];
                }
                optionsByCategory[option.category].push(option);
            });
            
            Object.keys(optionsByCategory).forEach(category => {
                const categoryTotal = optionsByCategory[category].reduce((sum, option) => sum + option.cost, 0);
                const categoryIcon = getCategoryIcon(category);
                const categoryName = getCategoryName(category);
                
                html += `
                    <div class="cost-item">
                        <div class="flex justify-between items-center">
                            <span><i class="fas fa-${categoryIcon} mr-2"></i>${categoryName}</span>
                            <span class="font-bold">${categoryTotal.toLocaleString()}å††</span>
                        </div>
                        <div class="mt-2 space-y-1">
                `;
                
                optionsByCategory[category].forEach(option => {
                    html += `
                        <div class="flex justify-between text-xs" style="color: var(--text-soft);">
                            <span>ãƒ»${option.name}</span>
                            <span>${option.cost.toLocaleString()}å††</span>
                        </div>
                    `;
                });
                
                html += `</div></div>`;
            });
            
            breakdown.innerHTML = html;
        }

        function getCategoryIcon(category) {
            const icons = {
                'dress': 'tshirt',
                'photo': 'camera',
                'flower': 'leaf',
                'performance': 'music'
            };
            return icons[category] || 'star';
        }

        function getCategoryName(category) {
            const names = {
                'dress': 'è¡£è£…',
                'photo': 'å†™çœŸãƒ»æ˜ åƒ',
                'flower': 'è£…èŠ±ãƒ»è£…é£¾',
                'performance': 'æ¼”å‡º'
            };
            return names[category] || 'ãã®ä»–';
        }

        function displayCostChart(calculation) {
            const ctx = document.getElementById('costChart').getContext('2d');
            
            const data = {
                labels: ['ä¼šå ´åŸºæœ¬æ–™', 'ã‚²ã‚¹ãƒˆè²»ç”¨', 'ã‚ªãƒ—ã‚·ãƒ§ãƒ³'],
                datasets: [{
                    data: [calculation.baseCost, calculation.guestCost, calculation.optionsCost],
                    backgroundColor: [
                        'rgba(248, 232, 232, 0.8)',
                        'rgba(232, 180, 184, 0.8)',
                        'rgba(255, 228, 230, 0.8)'
                    ],
                    borderColor: [
                        'rgba(248, 232, 232, 1)',
                        'rgba(232, 180, 184, 1)',
                        'rgba(255, 228, 230, 1)'
                    ],
                    borderWidth: 2
                }]
            };
            
            new Chart(ctx, {
                type: 'doughnut',
                data: data,
                options: {
                    responsive: true,
                    plugins: {
                        legend: {
                            position: 'bottom',
                            labels: {
                                padding: 20,
                                font: {
                                    family: 'Klee One, Noto Sans JP'
                                }
                            }
                        }
                    }
                }
            });
        }

        function displaySavingsAdvice(calculation) {
            const adviceDiv = document.getElementById('savingsAdvice');
            let advice = [];
            
            // äºˆç®—ã‚ªãƒ¼ãƒãƒ¼ã®å ´åˆã®å…·ä½“çš„ãªã‚¢ãƒ‰ãƒã‚¤ã‚¹
            if (calculation.total > calculation.budget) {
                const overAmount = calculation.total - calculation.budget;
                advice.push(`äºˆç®—ã‚’${overAmount.toLocaleString()}å††ã‚ªãƒ¼ãƒãƒ¼ã—ã¦ã„ã¾ã™ã€‚ä»¥ä¸‹ã®æ–¹æ³•ã§èª¿æ•´ã—ã¦ã¿ã¾ã—ã‚‡ã†ï¼š`);
            }
            
            // è²»ç”¨ã®å‰²åˆã«å¿œã˜ãŸã‚¢ãƒ‰ãƒã‚¤ã‚¹
            const optionRatio = calculation.optionsCost / calculation.total;
            if (optionRatio > 0.3) {
                advice.push('ã‚ªãƒ—ã‚·ãƒ§ãƒ³è²»ç”¨ãŒå…¨ä½“ã®30%ã‚’è¶…ãˆã¦ã„ã¾ã™ã€‚æœ¬å½“ã«å¿…è¦ãªã‚‚ã®ã‹è¦‹ç›´ã—ã¦ã¿ã¾ã—ã‚‡ã†ã€‚');
            }
            
            const guestPerPersonCost = calculation.guestCost / calculation.guestCount;
            if (guestPerPersonCost > 20000) {
                advice.push('1åã‚ãŸã‚Šã®è²»ç”¨ãŒé«˜ã‚ã§ã™ã€‚æ–™ç†ã®ã‚°ãƒ¬ãƒ¼ãƒ‰ã‚„ä¼šå ´ã‚¿ã‚¤ãƒ—ã®è¦‹ç›´ã—ã‚’æ¤œè¨ã—ã¦ã¿ã¦ãã ã•ã„ã€‚');
            }
            
            // ä¸€èˆ¬çš„ãªç¯€ç´„ã‚¢ãƒ‰ãƒã‚¤ã‚¹
            advice.push(...[
                'å¹³æ—¥ã‚„å¤•æ–¹ã®æ™‚é–“å¸¯ã‚’é¸ã¶ã¨ã€ä¼šå ´è²»ç”¨ãŒå®‰ããªã‚‹ã“ã¨ãŒã‚ã‚Šã¾ã™ã€‚',
                'æ‹›å¾…çŠ¶ã‚„å¸­æœ­ãªã©ã®å°ç‰©ã¯æ‰‹ä½œã‚Šã«ã™ã‚‹ã¨å¤§å¹…ã«ç¯€ç´„ã§ãã¾ã™ã€‚',
                'å†™çœŸã¯ã‚«ãƒ¡ãƒ©ãƒãƒ³ã‚’æœ€ä½é™ã«ã—ã¦ã€ã‚²ã‚¹ãƒˆã«ã‚‚ãŠé¡˜ã„ã™ã‚‹æ–¹æ³•ãŒã‚ã‚Šã¾ã™ã€‚',
                'è£…èŠ±ã¯å­£ç¯€ã®èŠ±ã‚’é¸ã¶ã¨ã‚³ã‚¹ãƒˆã‚’æŠ‘ãˆã‚‰ã‚Œã¾ã™ã€‚',
                'å¼•ãå‡ºç‰©ã¯ã‚«ã‚¿ãƒ­ã‚°ã‚®ãƒ•ãƒˆã«ã™ã‚‹ã¨å–œã°ã‚Œã¦ç¯€ç´„ã«ã‚‚ãªã‚Šã¾ã™ã€‚'
            ]);
            
            let html = '';
            advice.forEach((tip, index) => {
                html += `
                    <div class="savings-tip">
                        <p class="text-sm">${tip}</p>
                    </div>
                `;
            });
            
            adviceDiv.innerHTML = html;
        }

        function saveCalculation() {
            const savedData = {
                ...calculationData,
                id: Date.now(),
                name: `${getVenueName(selectedVenue)}ã§ã®çµå©šå¼ (${calculationData.guestCount}å)`
            };
            
            savedCalculations.unshift(savedData);
            
            // æœ€å¤§10ä»¶ã¾ã§ä¿å­˜
            if (savedCalculations.length > 10) {
                savedCalculations = savedCalculations.slice(0, 10);
            }
            
            localStorage.setItem('weddingCalculations', JSON.stringify(savedCalculations));
            
            alert('è¨ˆç®—çµæœã‚’ä¿å­˜ã—ã¾ã—ãŸï¼');
            
            loadCalculationHistory();
        }

        function loadCalculationHistory() {
            const historyList = document.getElementById('historyList');
            const historySection = document.getElementById('history');
            
            if (savedCalculations.length > 0) {
                historySection.classList.remove('hidden');
                
                let html = '';
                savedCalculations.forEach(calc => {
                    html += `
                        <div class="glass-card p-4 rounded-lg mb-4">
                            <div class="flex justify-between items-start">
                                <div>
                                    <h4 class="font-bold">${calc.name}</h4>
                                    <p class="text-sm" style="color: var(--text-soft);">
                                        ${new Date(calc.timestamp).toLocaleDateString('ja-JP')}
                                    </p>
                                    <p class="text-lg font-bold" style="color: var(--rose-gold);">
                                        ${calc.total.toLocaleString()}å††
                                    </p>
                                </div>
                                <div class="space-x-2">
                                    <button onclick="loadCalculation(${calc.id})" class="btn-primary text-xs">
                                        èª­ã¿è¾¼ã¿
                                    </button>
                                    <button onclick="deleteCalculation(${calc.id})" class="btn-primary bg-red-300 text-xs">
                                        å‰Šé™¤
                                    </button>
                                </div>
                            </div>
                        </div>
                    `;
                });
                
                historyList.innerHTML = html;
            }
        }

        function loadCalculation(id) {
            const calc = savedCalculations.find(c => c.id === id);
            if (calc) {
                // ãƒ•ã‚©ãƒ¼ãƒ ã«å€¤ã‚’è¨­å®š
                document.getElementById('guestCount').value = calc.guestCount;
                document.getElementById('region').value = calc.region;
                document.getElementById('budgetRange').value = calc.budget;
                document.getElementById('budgetDisplay').textContent = (calc.budget / 10000).toLocaleString() + 'ä¸‡å††';
                
                selectedVenue = calc.venue;
                calculationData = calc;
                
                // çµæœã‚’è¡¨ç¤º
                displayResults(calc);
                document.getElementById('results').classList.remove('hidden');
                document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
            }
        }

        function deleteCalculation(id) {
            if (confirm('ã“ã®è¨ˆç®—çµæœã‚’å‰Šé™¤ã—ã¾ã™ã‹ï¼Ÿ')) {
                savedCalculations = savedCalculations.filter(c => c.id !== id);
                localStorage.setItem('weddingCalculations', JSON.stringify(savedCalculations));
                loadCalculationHistory();
            }
        }

        function showComparison() {
            if (savedCalculations.length < 2) {
                alert('æ¯”è¼ƒã™ã‚‹ã«ã¯ã€è¤‡æ•°ã®è¨ˆç®—çµæœã‚’ä¿å­˜ã—ã¦ãã ã•ã„ã€‚');
                return;
            }
            
            const modal = document.getElementById('comparisonModal');
            const content = document.getElementById('comparisonContent');
            
            let html = '<div class="grid md:grid-cols-2 gap-4">';
            
            savedCalculations.slice(0, 4).forEach(calc => {
                html += `
                    <div class="glass-card p-4 rounded-lg">
                        <h4 class="font-bold mb-2">${calc.name}</h4>
                        <div class="space-y-2 text-sm">
                            <div class="flex justify-between">
                                <span>ã‚²ã‚¹ãƒˆæ•°:</span>
                                <span>${calc.guestCount}å</span>
                            </div>
                            <div class="flex justify-between">
                                <span>ä¼šå ´:</span>
                                <span>${getVenueName(calc.venue)}</span>
                            </div>
                            <div class="flex justify-between">
                                <span>åœ°åŸŸ:</span>
                                <span>${getRegionName(calc.region)}</span>
                            </div>
                            <div class="flex justify-between font-bold" style="color: var(--rose-gold);">
                                <span>ç·è²»ç”¨:</span>
                                <span>${calc.total.toLocaleString()}å††</span>
                            </div>
                        </div>
                    </div>
                `;
            });
            
            html += '</div>';
            content.innerHTML = html;
            modal.style.display = 'block';
        }

        function getVenueName(venue) {
            const names = {
                'hotel': 'ãƒ›ãƒ†ãƒ«',
                'restaurant': 'ãƒ¬ã‚¹ãƒˆãƒ©ãƒ³',
                'chapel': 'ãƒãƒ£ãƒšãƒ«',
                'garden': 'ã‚¬ãƒ¼ãƒ‡ãƒ³',
                'hall': 'å°‚é–€å¼å ´',
                'overseas': 'æµ·å¤–'
            };
            return names[venue] || venue;
        }

        function getRegionName(region) {
            const names = {
                'tokyo': 'æ±äº¬éƒ½',
                'osaka': 'å¤§é˜ªåºœ',
                'kyoto': 'äº¬éƒ½åºœ',
                'yokohama': 'ç¥å¥ˆå·çœŒ',
                'nagoya': 'æ„›çŸ¥çœŒ',
                'fukuoka': 'ç¦å²¡çœŒ',
                'other': 'ãã®ä»–'
            };
            return names[region] || region;
        }

        function resetCalculator() {
            if (confirm('å…¥åŠ›å†…å®¹ã‚’ãƒªã‚»ãƒƒãƒˆã—ã¾ã™ã‹ï¼Ÿ')) {
                // ãƒ•ã‚©ãƒ¼ãƒ ãƒªã‚»ãƒƒãƒˆ
                document.getElementById('guestCount').value = '';
                document.getElementById('region').value = '';
                document.getElementById('budgetRange').value = '3000000';
                document.getElementById('budgetDisplay').textContent = '300ä¸‡å††';
                
                // ãƒã‚§ãƒƒã‚¯ãƒœãƒƒã‚¯ã‚¹ãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('.option-check').forEach(cb => cb.checked = false);
                
                // ä¼šå ´é¸æŠãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('.venue-card').forEach(card => card.classList.remove('selected'));
                selectedVenue = '';
                
                // ã‚¹ãƒ†ãƒƒãƒ—ãƒªã‚»ãƒƒãƒˆ
                document.querySelectorAll('.step-section').forEach(section => section.classList.add('hidden'));
                document.querySelectorAll('.step').forEach(step => {
                    step.classList.remove('active', 'completed');
                });
                
                currentStep = 1;
                document.getElementById('section1').classList.remove('hidden');
                document.getElementById('step1').classList.add('active');
                document.getElementById('results').classList.add('hidden');
                
                updateProgress();
                
                // å…ˆé ­ã«ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«
                window.scrollTo({ top: 0, behavior: 'smooth' });
            }
        }

        // SNSã‚·ã‚§ã‚¢æ©Ÿèƒ½
        function shareTwitter() {
            const text = `çµå©šå¼è²»ç”¨è¨ˆç®—æ©Ÿã§è¦‹ç©ã‚‚ã‚Šã—ã¾ã—ãŸï¼\nç·è²»ç”¨: ${calculationData.total.toLocaleString()}å††\nä¼šå ´: ${getVenueName(selectedVenue)}\nã‚²ã‚¹ãƒˆ: ${calculationData.guestCount}å\n\n#ç¶™ç¶šã¯åŠ›ãªã‚Š #çµå©šå¼ #ãƒ–ãƒ©ã‚¤ãƒ€ãƒ« #è²»ç”¨è¨ˆç®—`;
            const url = window.location.href;
            window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(text)}&url=${encodeURIComponent(url)}`, '_blank');
        }

        function shareFacebook() {
            const url = window.location.href;
            window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(url)}`, '_blank');
        }

        function shareLine() {
            const text = `çµå©šå¼è²»ç”¨è¨ˆç®—æ©Ÿã§è¦‹ç©ã‚‚ã‚Š: ${calculationData.total.toLocaleString()}å††`;
            const url = window.location.href;
            window.open(`https://line.me/R/msg/text/?${encodeURIComponent(text + ' ' + url)}`, '_blank');
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«é–¢é€£
        function closeModal() {
            document.getElementById('comparisonModal').style.display = 'none';
        }

        function showPrivacyPolicy() {
            document.getElementById('privacyModal').style.display = 'block';
        }

        function closePrivacyModal() {
            document.getElementById('privacyModal').style.display = 'none';
        }

        function showDisclaimer() {
            document.getElementById('disclaimerModal').style.display = 'block';
        }

        function closeDisclaimerModal() {
            document.getElementById('disclaimerModal').style.display = 'none';
        }

        function showContact() {
            document.getElementById('contactModal').style.display = 'block';
        }

        function closeContactModal() {
            document.getElementById('contactModal').style.display = 'none';
        }

        // ãƒ¢ãƒ¼ãƒ€ãƒ«å¤–ã‚¯ãƒªãƒƒã‚¯ã§é–‰ã˜ã‚‹
        window.onclick = function(event) {
            const modals = ['comparisonModal', 'privacyModal', 'disclaimerModal', 'contactModal'];
            modals.forEach(modalId => {
                const modal = document.getElementById(modalId);
                if (event.target == modal) {
                    modal.style.display = 'none';
                }
            });
        }

        // PWAé–¢é€£
        if ('serviceWorker' in navigator) {
            window.addEventListener('load', function() {
                navigator.serviceWorker.register('./sw.js')
                    .then(function(registration) {
                        console.log('ServiceWorker registration successful with scope: ', registration.scope);
                    })
                    .catch(function(err) {
                        console.error('ServiceWorker registration failed: ', err);
                    });
            });
        }
    </script>

    <!-- Manifest.jsonå†…å®¹ -->
    <script type="application/json" id="manifest-data">
    {
        "name": "çµå©šå¼è²»ç”¨è¨ˆç®—æ©Ÿ",
        "short_name": "çµå©šå¼è¨ˆç®—æ©Ÿ",
        "description": "ç†æƒ³ã®çµå©šå¼ã®è²»ç”¨ã‚’ç°¡å˜ã«è¨ˆç®—ã§ãã‚‹ã‚¢ãƒ—ãƒª",
        "start_url": "/",
        "display": "standalone",
        "background_color": "#FFF8DC",
        "theme_color": "#F8E8E8",
        "icons": [
            {
                "src": "/icon-192.png",
                "sizes": "192x192",
                "type": "image/png"
            },
            {
                "src": "/icon-512.png",
                "sizes": "512x512",
                "type": "image/png"
            }
        ]
    }
    </script>
</body>
</html>
